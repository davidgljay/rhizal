0:
  send:
    - "Let's create a new event! What's the title of the event? You can cancel this process with #cancel."
  on_receive:
    if: "regex(message, /#cancel[^a-zA-Z0-9]/)"
    then:
      - step: 4
    else:
      - create_event:
          variable: "event_title"
          value: "message"
      - step: 1

1:
  send:
    - "Great! What's the description of the event?"
  on_receive:
    if: "regex(message, /#cancel[^a-zA-Z0-9]/)"
    then:
      - step: 4
    else:
      - set_event_variable:
          variable: "event_description"
          value: "message"
      - step: 2

2:
  send:
    - "When does the event start? Please provide the date and time (e.g., 2024-12-25 14:00:00)"
  on_receive:
    if: "regex(message, /#cancel[^a-zA-Z0-9]/)"
    then:
      - step: 4
    else:
      - set_event_variable:
          variable: "event_start_time"
          value: "message"
      - step: 3

3:
  send:
    - "Perfect! Creating your event now..."
  on_receive:
    - create_event:
        title: "{{event_title}}"
        description: "{{event_description}}"
        start_time: "{{event_start_time}}"
    - step: 5

4:
  send:
    - "Okay, I've canceled the event creation process. You can start it again with #events at any time."
  on_receive:
    - step: "done"

5:
  send:
    - "Great! Your event '{{event_title}}' has been created successfully!"
  on_receive:
    - step: "done"

